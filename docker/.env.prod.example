# =============================================================================
# QA Guardian - Production Environment Configuration
# =============================================================================
# Copy this file to .env.prod and configure all required values
#
# Usage:
#   cp .env.prod.example .env.prod
#   # Edit .env.prod with your values
#   docker-compose -f docker-compose.prod.yml --env-file .env.prod up -d
#
# Or use the deploy script (recommended):
#   ./scripts/deploy.sh
#
# ⚠️  SECURITY WARNING: Never commit .env.prod to version control!
# =============================================================================

# =============================================================================
# REQUIRED SETTINGS - You MUST configure these before deployment
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION MODE
# -----------------------------------------------------------------------------
NODE_ENV=production

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION [REQUIRED]
# -----------------------------------------------------------------------------
# ⚠️  CHANGE THIS! Use a strong, unique password
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION [REQUIRED]
# -----------------------------------------------------------------------------
# ⚠️  CHANGE THIS! Use a strong, unique password
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# -----------------------------------------------------------------------------
# OBJECT STORAGE (MinIO/S3) [REQUIRED]
# -----------------------------------------------------------------------------
# ⚠️  CHANGE THE PASSWORD! Use strong credentials
MINIO_ROOT_USER=qa-guardian-admin
MINIO_ROOT_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
STORAGE_BUCKET=qa-guardian-artifacts

# -----------------------------------------------------------------------------
# JWT/SESSION SECRETS [REQUIRED]
# -----------------------------------------------------------------------------
# ⚠️  CHANGE THESE! Generate unique secrets for production
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_-base64_64
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_-base64_64
SESSION_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_-base64_64

# -----------------------------------------------------------------------------
# DOMAIN CONFIGURATION [REQUIRED FOR SSL]
# -----------------------------------------------------------------------------
# Your production domain (without https://)
DOMAIN=qa.yourdomain.com

# Frontend URL (for CORS configuration) - include https://
FRONTEND_URL=https://qa.yourdomain.com

# =============================================================================
# SSL CONFIGURATION (For HTTPS)
# =============================================================================

# Email for Let's Encrypt certificate notifications
# Required if using automatic SSL with Traefik or Caddy
SSL_EMAIL=admin@yourdomain.com

# -----------------------------------------------------------------------------
# PORT CONFIGURATION
# -----------------------------------------------------------------------------
# External HTTP port (use 80 for production behind reverse proxy)
HTTP_PORT=80

# External HTTPS port (if using SSL termination in docker-compose)
HTTPS_PORT=443

# =============================================================================
# MCP SERVER CONFIGURATION
# =============================================================================
# Configure MCP server for AI agent integration (170+ tools)

# MCP transport mode: sse for web clients, stdio for CLI
MCP_TRANSPORT=sse

# QA Guardian API URL (backend URL as seen by MCP server)
QA_GUARDIAN_API_URL=https://qa.pixelcraftedmedia.com

# =============================================================================
# OPTIONAL SETTINGS - Configure based on your needs
# =============================================================================

# -----------------------------------------------------------------------------
# VERSION (for image tagging)
# -----------------------------------------------------------------------------
VERSION=latest

# -----------------------------------------------------------------------------
# AI PROVIDER CONFIGURATION [OPTIONAL]
# -----------------------------------------------------------------------------
# Enable AI features (test generation, root cause analysis, MCP Chat)
# At least one AI provider is required for AI features to work
#
# Primary: Kie.ai (70% cost savings on Claude models)
# Fallback: Anthropic (direct API access)
#
# The /api/v1/mcp/chat endpoint returns 503 if no AI keys configured

AI_PROVIDER_PRIMARY=kie
AI_PROVIDER_FALLBACK=anthropic

# Kie.ai API Key (get from https://kie.ai/dashboard)
# Leave blank to disable AI features
KIE_API_KEY=

# Anthropic API Key (get from https://console.anthropic.com)
# Used as fallback when Kie.ai is unavailable
ANTHROPIC_API_KEY=

# -----------------------------------------------------------------------------
# GOOGLE OAUTH [OPTIONAL]
# -----------------------------------------------------------------------------
# Enable "Sign in with Google" authentication
# Configure at https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# GITHUB INTEGRATION [OPTIONAL]
# -----------------------------------------------------------------------------
# Enable GitHub PR comments and repository sync
# Create a GitHub App: https://github.com/settings/apps
GITHUB_APP_ID=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# EMAIL NOTIFICATIONS [OPTIONAL]
# -----------------------------------------------------------------------------
# Configure SMTP for email alerts and notifications
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@yourdomain.com

# -----------------------------------------------------------------------------
# MONITORING [OPTIONAL]
# -----------------------------------------------------------------------------
# Enable application performance monitoring
# Sentry DSN for error tracking (https://sentry.io)
SENTRY_DSN=

# =============================================================================
# NOTES
# =============================================================================
#
# 1. The deploy script (./scripts/deploy.sh) will automatically generate
#    secure passwords for database, redis, and JWT secrets if they contain
#    "CHANGE_ME" placeholder values.
#
# 2. For SSL/HTTPS in production, you have several options:
#    a) Use a reverse proxy (nginx, Traefik, Caddy) with Let's Encrypt
#    b) Use a cloud load balancer (AWS ALB, Cloudflare, etc.)
#    c) Terminate SSL at the CDN level
#
# 3. For high availability, consider:
#    - PostgreSQL replication or managed database (RDS, Cloud SQL)
#    - Redis cluster or managed Redis (ElastiCache, Redis Cloud)
#    - S3 instead of MinIO for object storage
#
# 4. Back up your .env.prod file securely! Consider using:
#    - AWS Secrets Manager
#    - HashiCorp Vault
#    - 1Password/Bitwarden
#
