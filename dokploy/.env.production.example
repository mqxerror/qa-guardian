# =============================================================================
# QA Guardian - Dokploy Production Environment Variables
# =============================================================================
# Deploy to: qa.pixelcraftedmedia.com
#
# This file contains ALL environment variables needed for Dokploy deployment.
# Copy this file and configure in Dokploy dashboard under Environment Variables.
#
# To generate secure secrets (run in terminal):
#   openssl rand -base64 32   # For 32-byte secrets (passwords)
#   openssl rand -base64 64   # For 64-byte secrets (JWT tokens)
#
# =============================================================================


# =============================================================================
# REQUIRED - Application Environment
# =============================================================================
# Production mode enables security features and disables debugging
NODE_ENV=production

# Version tag for Docker images (use semantic versioning or 'latest')
VERSION=latest


# =============================================================================
# REQUIRED - Database (PostgreSQL)
# =============================================================================
# The DATABASE_URL is constructed from these values in docker-compose.yml
# Format: postgresql://postgres:${POSTGRES_PASSWORD}@postgres:5432/qa_guardian

# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=<REQUIRED: generate with: openssl rand -base64 32>


# =============================================================================
# REQUIRED - Redis Cache & Queue
# =============================================================================
# The REDIS_URL is constructed from this value in docker-compose.yml
# Format: redis://:${REDIS_PASSWORD}@redis:6379

# Generate with: openssl rand -base64 32
REDIS_PASSWORD=<REQUIRED: generate with: openssl rand -base64 32>


# =============================================================================
# REQUIRED - MinIO Object Storage (S3-compatible)
# =============================================================================
# Used for storing screenshots, artifacts, baselines, and trace files

# Admin username for MinIO console
MINIO_ROOT_USER=qa-guardian-admin

# Generate with: openssl rand -base64 32
MINIO_ROOT_PASSWORD=<REQUIRED: generate with: openssl rand -base64 32>

# S3 bucket name for artifacts
STORAGE_BUCKET=qa-guardian-artifacts


# =============================================================================
# REQUIRED - Authentication Secrets
# =============================================================================
# These must be unique and secure for production!

# JWT access token secret (used for API authentication)
# Generate with: openssl rand -base64 64
JWT_SECRET=<REQUIRED: generate with: openssl rand -base64 64>

# JWT refresh token secret (used for session renewal)
# Generate with: openssl rand -base64 64
JWT_REFRESH_SECRET=<REQUIRED: generate with: openssl rand -base64 64>

# Session encryption secret (used for cookie signing)
# Generate with: openssl rand -base64 64
SESSION_SECRET=<REQUIRED: generate with: openssl rand -base64 64>


# =============================================================================
# REQUIRED - Frontend URLs
# =============================================================================
# These are used by the backend for CORS configuration
# and by the frontend build process

# Production domain for CORS and redirects
FRONTEND_URL=https://qa.pixelcraftedmedia.com


# =============================================================================
# FRONTEND BUILD VARIABLES (VITE_*)
# =============================================================================
# These are baked into the frontend build at compile time.
# They must be available during the frontend Docker build process.
#
# NOTE: In Dokploy, set these as build-time args or ensure they're
# available when the frontend image is built.

# API URL for frontend HTTP requests
VITE_API_URL=https://qa.pixelcraftedmedia.com

# Alternative API base URL (some components use this)
VITE_API_BASE_URL=https://qa.pixelcraftedmedia.com

# WebSocket URL for real-time updates
VITE_SOCKET_URL=https://qa.pixelcraftedmedia.com

# MCP Chat endpoint URL
VITE_MCP_URL=https://qa.pixelcraftedmedia.com/mcp


# =============================================================================
# OPTIONAL - AI Provider Configuration
# =============================================================================
# Enable AI features: test generation, MCP Chat, root cause analysis,
# visual analysis, and AI-powered code explanation.
#
# Without these, AI features will return 503 errors.
# Get your keys:
#   - Kie.ai: https://kie.ai/dashboard (70% cost savings!)
#   - Anthropic: https://console.anthropic.com

# Primary AI provider (kie = 70% cost savings on Claude models)
AI_PROVIDER_PRIMARY=kie

# Fallback when primary is unavailable
AI_PROVIDER_FALLBACK=anthropic

# Kie.ai API Key (recommended - 70% cost savings)
# Leave blank to disable AI features
KIE_API_KEY=

# Anthropic API Key (direct API, used as fallback)
ANTHROPIC_API_KEY=


# =============================================================================
# OPTIONAL - Google OAuth (Single Sign-On)
# =============================================================================
# Enable "Sign in with Google" button on login page.
# Configure at: https://console.cloud.google.com/apis/credentials
#
# Required OAuth settings:
#   - Authorized JavaScript origins: https://qa.pixelcraftedmedia.com
#   - Authorized redirect URIs: https://qa.pixelcraftedmedia.com/api/v1/auth/google/callback

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=


# =============================================================================
# OPTIONAL - GitHub Integration
# =============================================================================
# Enable GitHub features: PR comments with test results, repository sync.
# Create a GitHub App: https://github.com/settings/apps
#
# Required permissions:
#   - Pull requests: Read & Write
#   - Contents: Read
#   - Metadata: Read

GITHUB_APP_ID=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=


# =============================================================================
# OPTIONAL - Email Notifications (SMTP)
# =============================================================================
# Enable email alerts for test failures, schedule completions, etc.

SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@qa.pixelcraftedmedia.com


# =============================================================================
# OPTIONAL - Error Tracking (Sentry)
# =============================================================================
# Monitor production errors and performance.
# Get DSN from: https://sentry.io

SENTRY_DSN=


# =============================================================================
# QUICK REFERENCE
# =============================================================================
#
# MINIMUM REQUIRED FOR DEPLOYMENT:
# --------------------------------
# NODE_ENV=production
# POSTGRES_PASSWORD=<secure-password>
# REDIS_PASSWORD=<secure-password>
# MINIO_ROOT_USER=qa-guardian-admin
# MINIO_ROOT_PASSWORD=<secure-password>
# STORAGE_BUCKET=qa-guardian-artifacts
# JWT_SECRET=<secure-64-byte-token>
# JWT_REFRESH_SECRET=<secure-64-byte-token>
# SESSION_SECRET=<secure-64-byte-token>
# FRONTEND_URL=https://qa.pixelcraftedmedia.com
# VITE_API_URL=https://qa.pixelcraftedmedia.com
# VITE_API_BASE_URL=https://qa.pixelcraftedmedia.com
# VITE_SOCKET_URL=https://qa.pixelcraftedmedia.com
# VITE_MCP_URL=https://qa.pixelcraftedmedia.com/mcp
#
# TO ENABLE AI FEATURES (highly recommended):
# -------------------------------------------
# KIE_API_KEY=<your-kie-api-key>  # Get from https://kie.ai
#   OR
# ANTHROPIC_API_KEY=<your-anthropic-key>  # Get from https://console.anthropic.com
#
# =============================================================================
